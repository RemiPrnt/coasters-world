{% extends '::base.html.twig' %}

{% block title %}{{ coaster.name }}{% endblock %}

{% block body %}
<div class="row">
  <div class="span12">
    <div class="page-header">
      <h1>
        <i id="status" data-toggle='tooltip' title="{{ coaster.status.name }}"
          class={% if coaster.status.idTechnical == 1 %}"icon-ok-sign"
          {% elseif coaster.status.idTechnical == 2 %}"icon-lock"
          {% elseif coaster.status.idTechnical == 3 %}"icon-wrench"
          {% elseif coaster.status.idTechnical == 4 %}"icon-share-alt"
          {% else %}"icon-question-sign"{% endif %}
        >
        </i>
        {{ coaster.name }}
        <small>{{ coaster.park.name }}, {{ coaster.park.country.name }}</small>
      </h1>
    </div>
  </div>
  <!-- Left side -->
  <div class="span8">
    <div class="content">
      <div class="page">
        <div id="tab">
          <div class="bs-docs-example">
            <!-- Tabs Widget -->
            <ul id="tabs" class="tabs nav nav-tabs">
              <li class="active"><a href="#caracs" data-toggle="tab"><i class="icon-cogs"></i> {{ 'tab.caracteristics'|trans }}</a></li>
              <li><a href="#photos" data-toggle="tab"><i class="icon-camera"></i> {{ 'tab.photos'|trans }}</a></li>
              <li><a href="#videos" data-toggle="tab"><i class="icon-facetime-video"></i> {{ 'tab.videos'|trans }}</a></li>
              <li><a href="#feedbacks" data-toggle="tab"><i class="icon-group"></i> {{ 'tab.feedbacks'|trans }}</a></li>
            </ul>
            <div id="tabsContent" class="tab-content">
              <div class="tab-pane fade in active" id="caracs">
                <dl class="dl-horizontal">
                  <dt>{% spaceless %}{{ 'info.type'|trans }}</dt>
                  <dd>{% for type in coaster.refCoaster.types %}
                    {{ type.name }} {% if not loop.last %}|{% endif %}
                    {% endfor %}
                    {% endspaceless %}
                  </dd>
                  <dt>{{ 'info.manufacturer'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.manufacturer.name|default('-') }}</dd>
                  <dt>{{ 'info.speed'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.speed }} {{ 'units.speed'|trans }}</dd>
                  <dt>{{ 'info.height'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.height }} {{ 'units.length'|trans }}</dd>
                  <dt>{{ 'info.length'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.length }} {{ 'units.length'|trans }}</dd>
                  <dt>{{ 'info.inversion_number'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.inversionNumber }}</dd>
                  <dt>{{ 'info.g_force'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.gForce }} {{ 'units.force'|trans }}</dd>
                  <dt>{{ 'info.duration'|trans }}</dt>
                  <dd>{{ coaster.refCoaster.duration|date("i\\m\\i\\n s\\s") }}</dd>
                  <dt>{{ 'info.configuration'|trans }}</dt>
                  <dd>|{{ coaster.refCoaster.restraint.name|default('-') }}</dd>
                </dl>
              </div>
              <div class="tab-pane fade in" id="photos">

                <section id="gallery">
                <div class="gallery">
                  <div class="row-fluid">
                    {% for image in coaster.images %}
                    <div class="span4">
                      <div class="item">
                        <article>
                          <div class="header">
                            <figure>
                              <img src="{{ asset('uploads/documents/' ~ image.path) }}" alt="">
                            </figure>
                            <div class="overlay-bg"></div>
                            <div class="overlay">
                              <ul class="unstyled inline">
                                <li><a href="{{ asset('uploads/documents/' ~ image.path) }}" rel="prettyPhoto[gallery1]" class="btn-solid btn-solid-mini"><i class="icon-zoom-in"></i> View Larger</a></li>
                              </ul>
                            </div>
                          </div>
                          <div class="body">
                            <h4><a href="gallery-item.html">{{ image.name }}</a></h4>
                            <span>{{ image.updatedAt|date("d/m/Y") }}</span>
                            <div class="pull-right">
                              <a href="gallery-item.html"><i class="icon-heart"></i> 89</a>
                            </div>
                          </div>
                        </article>
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
                </section>

              </div>
              <div class="tab-pane fade in" id="videos"></div>
              <div class="tab-pane fade in" id="feedbacks">
                {% include 'CoastersWorldSiteBundle:Coaster:view_feedback.html.twig'
                  with { 'comments': coaster.coasterComments, 'id': coaster.id } only %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr class="fadeout">
  </div>
  <!-- End left side -->

  <!-- Right side -->
  <div class="span4">
    <aside>
      <div class="widget">
        <div class="balloon" id="rating">
          <div class="icon"><i class="icon-trophy icon-4x"></i></div>
          <h3>{{ 'rating.mark'|trans }}</h3>
          <div class="text-center"><h4>{{ coaster.rate|number_format(1, ',') }} / 10</h4></div>
        </div>
      </div>
      <div class="widget">
        <div class="simple-box">
          <i class="icon-bullhorn icon-2x icon-round"><span></span></i><h3>Mon vote :</h3>
          {{ render(controller('CoastersWorldSiteBundle:Rating:new', { 'slug': coaster.slug })) }}
        </div>
      </div>
      <div class="widget">
        <div class="simple-box">
          {% include 'CoastersWorldSiteBundle:Coaster:search.html.twig' %}
        </div>
      </div>
      <div class="widget">
        <div class="simple-box">
          {{dump(coaster.id)}}
          <a href="{{ path('counter_add', {'id': coaster.id}) }}" class="btn btn-large btn-primary disabled">+ 1</a>

        </div>
      </div>
    </aside>
  </div>
  <!-- End right side -->
</div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('bundles/coastersworldsite/js/vendor/jquery.raty.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/coastersworldsite/js/vendor/jquery.prettyPhoto.min.js') }}"></script>
    <script type="text/javascript">
      jQuery('#status').tooltip();
    </script>
    <script type="text/javascript" src="{{ asset('bundles/coastersworldsite/js/vendor/select2.min.js') }}"></script>
{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" href="{{ asset('bundles/coastersworldsite/css/vendor/prettyPhoto.css') }}" type="text/css" media="screen" charset="utf-8" />
  <link rel="stylesheet" href="{{ asset('bundles/coastersworldsite/css/select2.css') }}" />
{% endblock %}
