{% extends 'CoastersWorldSiteBundle:News:news-template.html.twig' %}

{% block title %}{{ news.title }}{% endblock %}

{% block page_top_main %}
    {{ news.title }}
    {% if is_granted("ROLE_ADMIN") %}
        <a href="{{ path('coasters_world_news_edit', { id: news.id }) }}" class="btn btn-xs btn-primary">
            <i class="icon icon-edit"></i>
            Editer
        </a>
    {% endif %}
{% endblock %}

{% block newscontent %}
    <div class="blog-posts single-post">
        <article class="post post-large">

            <div class="post-image single">
                <a href="{{ path('coasters_world_news_view', { slug: news.slug }) }}">
                    {% if news.thumbnail is not null %}
                        <img class="img-thumbnail" src="{{ (images_path ~ '/' ~ news.thumbnail.path)|imagine_filter('news') }}" alt="">
                    {% endif %}
                </a>
            </div>

            <div class="post-date">
                <span class="day">{{ news.publishedAt|date("d") }}</span>
                <span class="month">
                    {{ news.publishedAt|localizeddate('none', 'none', app.request.locale, null, 'MMM')|capitalize }}
                </span>
            </div>

            <div class="post-content">
                {{ news.html|raw }}

                <!-- <div class="addthis_toolbox addthis_default_style " style="float:right">
                    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                    <a class="addthis_button_tweet"></a>
                </div> -->
                <!--<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-50faf75173aadc53"></script>-->

                <div class="post-meta">
                    {% if news.author is not null %}
                        <span><i class="icon icon-user"></i> Par {{ news.author.username }}</span>
                    {% endif %}
                    {% if news.coaster is not null %}
                        <span><i class="icon icon-tag"></i>
                            <span class="label label-default">{{ news.coaster.name }}</span>
                            {% for tag in news.tags %}
                                <span class="label label-default">{{ tag }}</span>
                            {% endfor %}
                        </span>
                    {% endif %}
                    <span><i class="icon icon-comments"></i> <a href="#comments">{{ news.comments|length }} commentaire(s)</a></span>
                </div>
            </div>

            {% include 'CoastersWorldSiteBundle:Comment:list.html.twig' with { 'comments': news.comments } only %}

            {{ render(controller('CoastersWorldSiteBundle:Comment:new', { 'id': news.id })) }}

        </article>
    </div>
{% endblock %}
