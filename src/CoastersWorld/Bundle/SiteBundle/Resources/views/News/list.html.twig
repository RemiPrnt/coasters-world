{% extends 'CoastersWorldSiteBundle:News:news-template.html.twig' %}

{% block page_top_main %}Les derni√®res news{% endblock %}

{% block newscontent %}

    <div class="blog-posts">

        {% for n in listNews %}

            <article class="post post-large">

                <div class="post-image single">
                    <a href="{{ path('coasters_world_news_view', { slug: n.slug }) }}">
                        {% if n.thumbnail is not null %}
                            <img class="img-thumbnail" src="{{ (images_path ~ n.thumbnail.path)|imagine_filter('news') }}" alt="">
                        {% endif %}
                    </a>
                </div>

                <div class="post-date">
                    <span class="day">{{ n.publishedAt|date("d") }}</span>
                    <span class="month">
                        {{ n.publishedAt|localizeddate('none', 'none', app.request.locale, null, 'MMM')|capitalize }}
                    </span>
                </div>

                <div class="post-content">

                    <h2><a href="{{ path('coasters_world_news_view', { slug: n.slug }) }}">{{ n.title }}</a></h2>
                    <p>{{ n.html|striptags|slice(0,250) }}...</p>
                    <div class="post-meta">
                        <span><i class="icon icon-user"></i> Par {{ n.author.username }}</span>
                        <span><i class="icon icon-tag"></i>
                            {% if n.coaster is not null %}<span class="label label-default">{{ n.coaster.name }}</span>{% endif %}
                            {% for tag in n.tags %}
                                <span class="label label-default">{{ tag }}</span>
                            {% endfor %}
                        </span>
                        <span><i class="icon icon-comments"></i> <a href="{{ path('coasters_world_news_view', { slug: n.slug }) }}#comments">{{ n.comments|length }} commentaire(s)</a></span>
                        <a href="{{ path('coasters_world_news_view', { slug: n.slug }) }}" class="btn btn-xs btn-primary pull-right">
                            Lire la suite...
                        </a>
                    </div>

                </div>
            </article>

        {% endfor %}

        <div class="navigation">
            {{ knp_pagination_render(listNews) }}
        </div>

    </div>

{% endblock %}
